#!/bin/bash -e
# Easily switch both kubectl context and namespace with one command:
#
#   kubectl bento app1d
#
# Put in your PATH and make executable:
#
#   curl -o $HOME/bin/kubectl-bento https://gist.githubusercontent.com/stefanwork/95e743582a4567cfe52186dad282092b/raw/kubectl-bento
#   chmod +x $HOME/bin/kubectl-bento

case $1 in
  staging1a)
    kubectl config use-context staging.us-east-2
    ;;
  staging2)
    kubectl config use-context staging.us-west-2
    ;;
  app1*)
    kubectl config use-context production.us-west-2
    ;;
  app2*)
    kubectl config use-context production.us-east-1
    ;;
  *)
    echo "Unknown bento: $1"
    exit 1
esac

kubectl config set-context $(kubectl config current-context) --namespace="$1"
