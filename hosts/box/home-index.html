<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home Services</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #1a1a1a;
      color: #e0e0e0;
    }

    h1 {
      color: #fff;
      border-bottom: 2px solid #444;
      padding-bottom: 10px;
    }

    .services {
      display: grid;
      gap: 15px;
      margin-top: 30px;
    }

    .service-link {
      display: block;
      padding: 20px;
      background: #2a2a2a;
      border: 1px solid #444;
      border-radius: 8px;
      text-decoration: none;
      color: #fff;
      transition: all 0.2s;
    }

    .service-link:hover {
      background: #333;
      border-color: #666;
      transform: translateX(5px);
    }

    .service-name {
      font-size: 1.2em;
      font-weight: 600;
    }

    .service-desc {
      color: #aaa;
      font-size: 0.9em;
      margin-top: 5px;
    }

    .user-bar {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
      color: #aaa;
      font-size: 0.9em;
    }

    .logout-btn {
      padding: 6px 12px;
      background: #333;
      border: 1px solid #555;
      border-radius: 4px;
      color: #e0e0e0;
      text-decoration: none;
      font-size: 0.85em;
    }

    .logout-btn:hover {
      background: #444;
      border-color: #666;
    }
  </style>
</head>

<body>
  <div class="user-bar">
    <span><!--# echo var="email" --></span>
    <a href="/oauth2/sign_out?rd=https://auth.paholg.com/ui/logout" class="logout-btn">Logout</a>
  </div>
  <h1>Home Services</h1>
  <div class="services">
    <!--# if expr="$groups = /home_assistant_admin|home_assistant_user/" -->
    <a href="https://ha.paholg.com/auth/oidc/redirect" class="service-link">
      <div class="service-name">Home Assistant</div>
      <div class="service-desc">Smart home automation</div>
    </a>
    <!--# endif -->

    <!--# if expr="$groups = /jellyfin|jellyfin_admin/" -->
    <a href="https://tv.paholg.com/sso/OID/start/kanidm" class="service-link">
      <div class="service-name">Jellyfin</div>
      <div class="service-desc">Media server</div>
    </a>
    <!--# endif -->

    <!--# if expr="$groups = /foundry_vtt_player|foundry_vtt_admin/" -->
    <a href="https://vtt.paholg.com" class="service-link">
      <div class="service-name">Foundry VTT</div>
      <div class="service-desc">Virtual Table Top</div>
    </a>
    <!--# endif -->

    <!--# if expr="$groups = /arr_admin/" -->
    <a href="/sonarr" class="service-link">
      <div class="service-name">Sonarr</div>
      <div class="service-desc">TV series management</div>
    </a>
    <a href="/radarr" class="service-link">
      <div class="service-name">Radarr</div>
      <div class="service-desc">Movie management</div>
    </a>
    <a href="/transmission/web" class="service-link">
      <div class="service-name">Transmission</div>
      <div class="service-desc">Torrent management</div>
    </a>
    <a href="/prowlarr" class="service-link">
      <div class="service-name">Prowlarr</div>
      <div class="service-desc">Indexer manager</div>
    </a>
    <a href="https://bitmagnet.paholg.com" class="service-link">
      <div class="service-name">Bitmagnet</div>
      <div class="service-desc">Indexer</div>
    </a>
    <!--# endif -->

    <!--# if expr="$groups = /home_assistant_admin/" -->
    <a href="/zigbee/" class="service-link">
      <div class="service-name">Zigbee2MQTT</div>
      <div class="service-desc">Zigbee device management</div>
    </a>
    <!--# endif -->

    <!--# if expr="$groups = /authit_admin/" -->
    <a href="https://authit.paholg.com" class="service-link">
      <div class="service-name">AuthIt!</div>
      <div class="service-desc">Kanidm User management</div>
    </a>
    <!--# endif -->

    <a href="https://auth.paholg.com/ui/profile" class="service-link">
      <div class="service-name">Profile</div>
      <div class="service-desc">Profile Management</div>
    </a>
  </div>
</body>

</html>