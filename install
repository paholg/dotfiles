#!/usr/bin/env bash
set -euxo pipefail

if test -f "`hostname`/configuration.nix"; then
    read -p "Replace /etc/nixos/configuration.nix? (y/N) " yn
    if [ "$yn" != "y" ]; then
        exit 1
    fi
    sudo ln -sf $HOME/dotfiles/`hostname`/configuration.nix /etc/nixos/configuration.nix
fi

if test -f "`hostname`/home.nix"; then
    read -p "Replace $HOME/.config/nixpkgs/home.nix? (y/N) " yn
    if [ "$yn" != "y" ]; then
        exit 1
    fi

    mkdir -p $HOME/.config/nixpkgs
    ln -sf $HOME/dotfiles/`hostname`/home.nix $HOME/.config/nixpkgs/home.nix
fi

